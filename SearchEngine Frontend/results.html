<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
      * {
        font-family: 'Open Sans';
      }
      /* Modes */
      body {
        transition: background-color 0.5s;
      }
      /* Light Mode Styles */
      body.light-mode {
        background-color: #fff;
        color: #000;
      }
      /* Dark Mode Styles */
      body.dark-mode {
        background-color: #1a1a1a;
        color: #fff;
      }

      /* Search CSS */
      .search {
        margin: 0 auto;
        text-align: center;
      }
      .search h4 {
        margin: 240px 0px 20px 0px;
        font-size: 120px;
        width: auto;

      }
      .search input[type=search] {
        height: 50px;
        font-size: 14px;
        background-image: url(https://cdn2.hubspot.net/hubfs/4004166/bioticresearch_website_assets/images/search_icon.png);
        background-repeat: no-repeat;
        background-position: left center;
        padding-left: 40px;
        background-color: #fff;
        border: 1px solid #000;
        box-shadow: none;
        border-radius: 20px;
        outline: none;
        display: inline-block;
        margin-top: 10px;
        width: 30%;
      }
      .search .input-group {
        width: 60%;
        margin: 0 auto;
      }
      /* Navbar CSS */
      .navbar .nav-item a:hover{
        background-color: #d6edf3;
        border-radius: 7px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
      }

    </style>
    <title>Results</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href=".">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="about.html">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="https://github.com/AnyUserNameNotAvailable/Search-Engine-Project">GitHub</a>
              </li>
            </ul>
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#" onclick="darkModeToggle()">Mode</a>
              </li>
            </ul>
        </div>
    </nav>
    <!--search-->
    <div class="search">
        <div class="input-group">
            <input id="searchInput" type="search" class="form-control" autocomplete="" placeholder="Advin: Your Adventure Awaits..." />
        </div>
    </div>
    <div id="searchResults"></div> <!-- Container for search results -->
    
    <script>
      // JavaScript to toggle dark mode
      const body = document.body;

      const darkModeToggle = () => {
        body.classList.toggle('dark-mode');
        const isDarkMode = body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
      };

      // Check for dark mode preference on page load
      document.addEventListener('DOMContentLoaded', () => {
        const savedDarkMode = localStorage.getItem('darkMode');
        if (savedDarkMode === 'true') {
          body.classList.add('dark-mode');
        }
      });  
        // JavaScript code to retrieve and display search results
        document.addEventListener('DOMContentLoaded', () => {
            const searchButton = document.getElementById('searchButton');
            const searchInput = document.getElementById('searchInput');
            const searchResultsDiv = document.getElementById('searchResults');

            searchButton.addEventListener('click', () => {
                const query = searchInput.value.trim(); // Get the search query
                if (query !== '') {
                    searchBackend(query); // Call the function to search the backend
                } else {
                    alert('Please enter a search query.');
                }
            });

            function searchBackend(query) {
                fetch(`http://localhost:9200/search?query=${query}`)
                    .then(response => response.json())
                    .then(data => {
                        // Display search results on the page
                        searchResultsDiv.innerHTML = ''; // Clear previous results
                        data.hits.hits.forEach(hit => {
                            const resultItem = document.createElement('div');
                            resultItem.textContent = hit._source.title; // Display title of each search result
                            searchResultsDiv.appendChild(resultItem);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching search results:', error);
                    });
            }
        });
    </script>
</body>
</html>